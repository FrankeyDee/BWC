{"ast":null,"code":"import _classCallCheck from \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/src/components/Secure/index.js\";\n// import React from \"react\";\nimport React, { Component, Fragment } from \"react\";\nimport { Redirect } from 'react-router-dom'; // eslint-disable-next-line\n\nimport Title from \"../UsernameForm/Title\";\nimport API from \"../Login-Reg-Utils/API\";\nimport './secure.css';\nimport { Link } from \"react-router-dom\";\n\nvar Secure =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Secure, _Component);\n\n  function Secure(props) {\n    var _this;\n\n    _classCallCheck(this, Secure);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Secure).call(this, props));\n    _this.state = {\n      user: null,\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(Secure, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.validateCookie();\n    }\n  }, {\n    key: \"validateCookie\",\n    value: function validateCookie() {\n      var _this2 = this;\n\n      // const cookieValue = cookie.load('connect.sid');\n      API.validateCookie().then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        console.warn(res);\n\n        if (res.username) {\n          _this2.setState({\n            user: res,\n            loading: false\n          });\n        } else {\n          _this2.setState({\n            loading: false\n          });\n        }\n      }).catch(function (err) {\n        return _this2.setState({\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      API.logout().then(function (res) {\n        return window.location.reload();\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    } // handleSubmit = () => {\n    //     this.props.history.push(\"/loginshow\");\n    //     // console.log(this.props)\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \" Loading... \");\n      }\n\n      if (!this.state.user) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"What to Watch?\"), React.createElement(\"ul\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        className: \"btn btn-outline-success\",\n        a: true,\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Search\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/saved\",\n        className: \"btn btn-outline-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Saved Shows\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        className: \"btn btn-outline-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Log Out\")))));\n    }\n  }]);\n\n  return Secure;\n}(Component);\n\nexport default Secure;","map":{"version":3,"sources":["/Users/frankey/Desktop/Coding_Bootcamp/Binge-Watch-Club/client/src/components/Secure/index.js"],"names":["React","Component","Fragment","Redirect","Title","API","Link","Secure","props","state","user","loading","validateCookie","then","res","json","console","warn","username","setState","catch","err","logout","window","location","reload","error"],"mappings":"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","sourcesContent":["// import React from \"react\";\nimport React, {\n    Component,\n    Fragment\n} from \"react\";\nimport {\n    Redirect\n} from 'react-router-dom';\n// eslint-disable-next-line\nimport Title from \"../UsernameForm/Title\";\nimport API from \"../Login-Reg-Utils/API\";\nimport './secure.css'\nimport { Link } from \"react-router-dom\";\n\n\nclass Secure extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: null,\n            loading: true\n        };\n    }\n\n    componentDidMount() {\n        this.validateCookie();\n    }\n\n    validateCookie() {\n        // const cookieValue = cookie.load('connect.sid');\n        API.validateCookie()\n            .then(res => res.json())\n            .then(res => {\n                console.warn(res);\n                if (res.username) {\n                    this.setState({\n                        user: res,\n                        loading: false\n                    });\n                } else {\n                    this.setState({\n                        loading: false\n                    });\n                }\n            })\n            .catch(err => this.setState({\n                loading: false\n            }))\n    }\n\n    handleLogout() {\n        API.logout()\n            .then(res => window.location.reload())\n            .catch(err => console.error(err));\n    }\n\n\n\n\n    // handleSubmit = () => {\n    //     this.props.history.push(\"/loginshow\");\n    //     // console.log(this.props)\n    // }\n\n\n\n\n    render() {\n\n        if (this.state.loading) {\n            return <div> Loading... </div>;\n        }\n        if (!this.state.user) {\n            return <Redirect to = '/login' />\n        }\n        return ( \n            <div className=\"container\">\n                <Fragment>\n                <Title>What to Watch?</Title>\n                <ul className=\"options\">\n                    <li><Link to=\"/\" className=\"btn btn-outline-success\" a href=\"/\">Search</Link></li>\n                    <li><Link to=\"/saved\" className=\"btn btn-outline-info\">Saved Shows</Link></li>\n                    <li><Link to=\"/\" className=\"btn btn-outline-warning\">Log Out</Link></li>\n                </ul>\n                </Fragment>\n            </div>\n        );\n\n    }\n\n}\n\nexport default Secure"]},"metadata":{},"sourceType":"module"}